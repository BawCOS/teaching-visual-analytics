# Exploratory Visual Analytics {#Chpt2}

> “It isn’t accidental that when we begin to understand something we say 'I see.' 
> Not 'I hear' or 'I smell'” -- Stephen Few

> "You see alot just by looking"  -- Yogi Berra

> Visualization can surprise but doesn't scale well. Modeling scales well but cannot surprise you. -- Hadley Wickham


This chapter starts with visualization and explores relationships between variables. Ultimately, we will be recreated Hans Rosling's famous animated visualization from his [TED talk](https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen?language=en ). We will again using R to generate the display however, if you don't want to use R go the gapminder website, https://www.gapminder.org/, and under the header tools, you will have access to all the data as well as an interactive scatter plot.

## Lesson Preparation

### Objectives:  

After the training, students will:
  
1.    explain the basic principles of visual displays of data
2.    be able to generate an animated visualization 
3.    be able to evaluate and compare visual displays of data 


### Preparation

Prior to class, complete the following 
1. Watch the video from [Hans Rosling](https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen#t-1052481) entitled "The best stats you've ever seen" .  

2. Go to the [gapminder website](https://www.gapminder.org/) and under the tab tools, experiment with some data.

## Lesson Introduction {#Intro2}

Suggestions to start the lesson:

1. In the video, Rosling mentions that his students believe that developed countries have long life expectancies and low birth rates while developing countries are the opposite. What are some other distinctions between these categories?  

There are many ways to answer this question and your students may talk about GPD, infant mortality rates, and age of population.

2.  What do you think made Hans Rosling's presentation so effective? What did you like about the visualizations? What are some of the design principles you learned from this video?

We are replicating Figure \@ref(fig:fig0) below to remind you of the process for visual analytics. We are assuming that you have read Chapter \@ref(#Chpt1) even if you did not use the material. In this lesson we will be jumping into the visualization portion of the cycle first in an attempt to find insight. We are looking for a way to determine developed and developing countries and watch their progression over time. Thus we will go to analytical reasoning and interaction after starting with the visualization. We must start with data collection first.  

![](./images/Cycle.png)  

## Data Collection  

The data for this lesson comes from the [Gapminder](https://www.gapminder.org/data/) website. Again, you could just start with the **tools** application on the website instead of using the R code here.  

First we will load two pacages we need. The data is downloaded in a Excel spreadsheet; we will use the package **readxl** to read it.  In addition, R has a package called **gapminder** which is a subset of the data from the Gapminder website. We will use it to get country names to reduce the size of our data and exclude countries with a large amount of missing data.  

```{r eval=FALSE}
library(readxl)
library(gapminder)
```

The data has been downloaded and is in the **data** folder on the GitHub site for this book.

```{r}
gapminder_population_temp <- read_excel("data/indicator gapminder population.xlsx")
head(gapminder_population_temp)
```

From the **gapminder** package, we will get the subset of countries where the data is most complete.

```{r}
countries<-levels(gapminder$country)
```

Finally, we will wrangle the data into the final form needed.

```{r}
gapminder_population<-gapminder_population_temp %>%
  gather(year,pop,-"Total population") %>%
  rename(country="Total population") %>%
  mutate(year=as.integer(year),pop=as.integer(pop)) %>%
  filter(country %in% countries,year>=1950)
rm(gapminder_population_temp)
gapminder_population
```

As a check, we will look for missing observations.

```{r}
gapminder_population[is.na(gapminder_population$pop),]
```

We are missing the last two years of data for Taiwan. We could drop Taiwan or get another estimate of the population from the web.  Using the website http://www.worldometers.info/world-population/taiwan-population/ we see that for the last four years the population has grown by about 70000 each year. So we will estimate the population for 2014 and 2015 by adding 70000 to the population in 2013 for each year.. 

```{r}
gapminder_population[is.na(gapminder_population$pop),][1,3]=23151000 + 70000
gapminder_population[is.na(gapminder_population$pop),][1,3]=23151000 + 140000
```

Now we need to add the continents to the dataframe.

```{r}
dict<-gapminder %>% group_by(continent) %>% distinct(country)
```

